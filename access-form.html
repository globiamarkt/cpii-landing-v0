<!--
================================================================================
  ARCHIVO:  apps/cpii/scenes/access-form.html
  VERSIÃ“N:  1.2.0
  FECHA:    2026-02-17
  PROPÃ“SITO: Formulario de solicitud de acceso CPII con captura de leads,
             asignaciÃ³n territorial de Responsable de Club (tabla fija) y
             vinculaciÃ³n de genealogÃ­a (Prescriptor/Referido). IntegraciÃ³n Firestore.
             Esquema de datos completo: Fase 1 (formulario) + Fase 2 (null, pendiente
             de completar vÃ­a email/reuniÃ³n: POF, presupuesto, tipo propiedad).
  AUTOR:    Claude Sonnet 4.5 â€” Protocolo CartografÃ­a QuirÃºrgica v3.1

  ÃNDICE MAESTRO [SEC-XX]:
  â”œâ”€â”€ [SEC-01] METADATOS E IMPORTACIONES (head)
  â”œâ”€â”€ [SEC-02] CONFIGURACIÃ“N DE TEMA (Tailwind config)
  â”œâ”€â”€ [SEC-03] NAVEGACIÃ“N (header sticky)
  â”œâ”€â”€ [SEC-04] CONTENIDO LATERAL â€” BENEFICIOS (left panel)
  â”œâ”€â”€ [SEC-05] NÃšCLEO: FORMULARIO DE ACCESO (right panel)
  â”‚     â”œâ”€â”€ [SEC-05a] Selector de perfil (Inversor / Promotor)
  â”‚     â”œâ”€â”€ [SEC-05b] Campos personales (Nombre, Email, TelÃ©fono, PaÃ­s)
  â”‚     â”œâ”€â”€ [SEC-05c] SecciÃ³n de Referido / GenealogÃ­a (â‰  Responsable de Club)
  â”‚     â”œâ”€â”€ [SEC-05d] Checkbox RGPD obligatorio
  â”‚     â””â”€â”€ [SEC-05e] BotÃ³n de envÃ­o + mensaje de Ã©xito
  â”œâ”€â”€ [SEC-06] PIE DE PÃGINA (legal / soporte)
  â”œâ”€â”€ [SEC-07] LÃ“GICA: TABLA DE ASIGNACIÃ“N TERRITORIAL (club_manager_map)
  â”œâ”€â”€ [SEC-08] LÃ“GICA: CAPTURA DE REFERIDOS (URL params + sessionStorage)
  â””â”€â”€ [SEC-09] LÃ“GICA: FIRESTORE â€” INICIALIZACIÃ“N Y ENVÃO DE LEAD

  NOTAS DE ARQUITECTURA:
  Â· Responsable de Club (location.club_manager) â† tabla fija por paÃ­s [SEC-07]
    Absorbe leads huÃ©rfanos (sin padrino, baja o expulsiÃ³n del progenitor).
  Â· Padrino (genealogy.padrino) â† capturado desde URL ?ref= o sessionStorage
    Entidad INDEPENDIENTE. Base para cÃ¡lculo de Revenue Share multinivel.
  Â· Ambas entidades NO se cruzan nunca en este formulario.

  DEPENDENCIAS:
  Â· Tailwind CSS CDN v3 (plugins: forms, container-queries)
  Â· Google Fonts: Playfair Display + Manrope
  Â· Google Material Symbols Outlined
  Â· Firebase SDK v10.8.1 (mÃ³dulos CDN) â†’ [SEC-09]
================================================================================
-->
<!DOCTYPE html>
<html lang="pt">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-01] HEAD â•â• -->

<head>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="description"
        content="Solicita acceso al Club Privado de InversiÃ³n Inmobiliaria CPII Portugal. Formulario de registro exclusivo para inversores y promotores." />
    <title>CPII Portugal â€” Solicitar Acceso</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- TipografÃ­a: Playfair Display (display) + Manrope (body) -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600&family=Manrope:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <!-- Material Symbols -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-02] TAILWIND CONFIG â•â• -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        gold: "#C1A85D",
                        "gold-light": "#D4BC7A",
                        "gold-hover": "#A8924D",
                        "gold-dim": "rgba(193,168,93,0.12)",
                        carbon: "#131313",
                        "carbon-mid": "#1C1C1C",
                        "dark-grey": "#282828",
                        "input-bg": "#222222",
                        "text-main": "#F5F0E8",
                        "text-muted": "#8A8A8A",
                        "text-dim": "#555555",
                        "border-sub": "rgba(255,255,255,0.07)",
                    },
                    fontFamily: {
                        display: ["Playfair Display", "Georgia", "serif"],
                        body: ["Manrope", "system-ui", "sans-serif"],
                    },
                    boxShadow: {
                        gold: "0 0 30px rgba(193,168,93,0.18)",
                        "gold-sm": "0 0 12px rgba(193,168,93,0.12)",
                        card: "0 8px 48px rgba(0,0,0,0.55)",
                    },
                },
            },
        };
    </script>

    <style>
        /* Estilos base */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: "Manrope", system-ui, sans-serif;
        }

        h1,
        h2,
        h3,
        .font-display {
            font-family: "Playfair Display", Georgia, serif;
        }

        /* Grain overlay sutil */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E");
            opacity: 0.6;
        }

        /* Inputs â€” reset de estilos nativos del plugin forms */
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select {
            background-color: #222222 !important;
            border-color: rgba(255, 255, 255, 0.08) !important;
            color: #F5F0E8 !important;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input:focus,
        select:focus {
            border-color: #C1A85D !important;
            box-shadow: 0 0 0 2px rgba(193, 168, 93, 0.15) !important;
            outline: none !important;
        }

        input::placeholder {
            color: rgba(138, 138, 138, 0.5) !important;
        }

        option {
            background: #222;
            color: #F5F0E8;
        }

        /* Checkbox dorado */
        input[type="checkbox"] {
            accent-color: #C1A85D;
            background-color: #222 !important;
            border-color: rgba(193, 168, 93, 0.4) !important;
            border-radius: 3px;
        }

        /* Scroll bar discreta */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #131313;
        }

        ::-webkit-scrollbar-thumb {
            background: #3a3a3a;
            border-radius: 2px;
        }

        /* Animaciones de entrada */
        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(18px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .anim-1 {
            animation: fadeUp 0.55s ease both 0.05s;
        }

        .anim-2 {
            animation: fadeUp 0.55s ease both 0.15s;
        }

        .anim-3 {
            animation: fadeUp 0.55s ease both 0.25s;
        }

        .anim-4 {
            animation: fadeUp 0.55s ease both 0.35s;
        }

        .anim-5 {
            animation: fadeUp 0.55s ease both 0.45s;
        }

        /* Estado de envÃ­o en el botÃ³n */
        .btn-loading .btn-text {
            display: none;
        }

        .btn-loading .btn-loader {
            display: flex;
        }

        .btn-loader {
            display: none;
            align-items: center;
            gap: 8px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            border-top-color: #131313;
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
        }

        /* LÃ­nea decorativa animada en el panel izquierdo */
        .gold-line {
            width: 1px;
            height: 0;
            background: linear-gradient(to bottom, transparent, #C1A85D, transparent);
            animation: growLine 1.2s ease 0.6s forwards;
        }

        @keyframes growLine {
            to {
                height: 100px;
            }
        }
    </style>
</head>

<body class="bg-carbon text-text-main min-h-screen flex flex-col overflow-x-hidden antialiased dark">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-03] HEADER / NAV â•â• -->
    <header
        class="sticky top-0 z-50 flex items-center justify-between border-b border-border-sub bg-carbon/85 px-6 py-4 backdrop-blur-md lg:px-10">
        <div class="flex items-center gap-3.5">
            <!-- Logotipo -->
            <div
                class="flex size-9 items-center justify-center rounded-full border border-gold/25 bg-gradient-to-br from-dark-grey to-carbon text-gold shadow-gold-sm">
                <span class="material-symbols-outlined"
                    style="font-size:18px;font-variation-settings:'FILL' 0,'wght' 300">apartment</span>
            </div>
            <div class="leading-none">
                <span class="font-display text-lg font-medium tracking-wide text-text-main">CPII</span>
                <span class="ml-1.5 text-[10px] font-light uppercase tracking-[0.2em] text-gold">Portugal</span>
            </div>
        </div>

        <a href="index.html"
            class="flex items-center gap-1.5 text-xs text-text-muted transition-colors hover:text-gold">
            <span class="material-symbols-outlined"
                style="font-size:14px;font-variation-settings:'FILL' 0,'wght' 300">arrow_back</span>
            Volver al inicio
        </a>
    </header>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-04/05] MAIN CONTENT â•â• -->
    <main class="relative z-10 flex flex-1 flex-col lg:flex-row">

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [SEC-04] PANEL IZQUIERDO: BENEFICIOS â”€â”€ -->
        <div
            class="relative flex w-full flex-col justify-between overflow-hidden bg-carbon-mid px-8 py-12 lg:w-5/12 lg:px-14 lg:py-20 xl:w-1/2">

            <!-- Orbe decorativo fondo -->
            <div
                class="pointer-events-none absolute -left-32 top-10 h-[500px] w-[500px] rounded-full bg-gold/[0.04] blur-[80px]">
            </div>
            <div
                class="pointer-events-none absolute bottom-0 left-0 right-0 h-40 bg-gradient-to-t from-carbon to-transparent">
            </div>

            <div class="relative z-10 flex flex-col gap-10">

                <!-- Badge -->
                <div
                    class="anim-1 inline-flex w-fit items-center gap-2 rounded-full border border-gold/25 bg-gold-dim px-4 py-1.5 text-[10px] font-medium uppercase tracking-[0.18em] text-gold">
                    <span class="material-symbols-outlined"
                        style="font-size:13px;font-variation-settings:'FILL' 1,'wght' 400">workspace_premium</span>
                    Acceso Exclusivo
                </div>

                <!-- Titular -->
                <div class="anim-2 space-y-5">
                    <h1
                        class="font-display text-5xl font-light leading-[1.05] tracking-tight text-text-main sm:text-6xl lg:text-7xl">
                        El poder<br />de la
                        <span class="italic text-gold"> Red</span><br />
                        a tu alcance
                    </h1>
                    <p class="max-w-sm text-sm leading-relaxed text-text-muted font-light">
                        Tu acceso es validado individualmente. Se te asignarÃ¡ un
                        <strong class="font-medium text-text-main/80">Responsable de Club</strong> segÃºn
                        tu paÃ­s de residencia para garantizar atenciÃ³n personalizada.
                    </p>
                </div>

                <!-- Separador con lÃ­nea dorada -->
                <div class="anim-3 flex items-center gap-4">
                    <div class="gold-line"></div>
                    <ul class="flex flex-col gap-3.5">
                        <li class="flex items-start gap-3 group">
                            <span
                                class="material-symbols-outlined mt-0.5 text-gold transition-colors group-hover:text-gold-light"
                                style="font-size:16px;font-variation-settings:'FILL' 1,'wght' 400">check_circle</span>
                            <span class="text-sm font-light text-text-main/85">Rentabilidad verificada y auditada</span>
                        </li>
                        <li class="flex items-start gap-3 group">
                            <span
                                class="material-symbols-outlined mt-0.5 text-gold transition-colors group-hover:text-gold-light"
                                style="font-size:16px;font-variation-settings:'FILL' 1,'wght' 400">check_circle</span>
                            <span class="text-sm font-light text-text-main/85">Revenue Share multinivel hasta Nivel
                                3</span>
                        </li>
                        <li class="flex items-start gap-3 group">
                            <span
                                class="material-symbols-outlined mt-0.5 text-gold transition-colors group-hover:text-gold-light"
                                style="font-size:16px;font-variation-settings:'FILL' 1,'wght' 400">check_circle</span>
                            <span class="text-sm font-light text-text-main/85">AutofinanciaciÃ³n garantizada</span>
                        </li>
                        <li class="flex items-start gap-3 group">
                            <span
                                class="material-symbols-outlined mt-0.5 text-gold transition-colors group-hover:text-gold-light"
                                style="font-size:16px;font-variation-settings:'FILL' 1,'wght' 400">check_circle</span>
                            <span class="text-sm font-light text-text-main/85">Networking con lÃ­deres del sector</span>
                        </li>
                    </ul>
                </div>

            </div>

            <!-- NÃºmero decorativo fondo -->
            <div
                class="pointer-events-none absolute bottom-10 right-6 font-display text-[10rem] font-light leading-none text-white/[0.02] select-none lg:right-10">
                II
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [SEC-05] PANEL DERECHO: FORMULARIO â”€â”€ -->
        <div
            class="flex w-full items-start justify-center bg-carbon px-4 py-10 lg:w-7/12 lg:items-center lg:px-8 xl:w-1/2">

            <!-- Fondo decorativo -->
            <div class="pointer-events-none absolute inset-0 overflow-hidden opacity-[0.03]">
                <div class="absolute right-10 top-10 h-80 w-80 rounded-full border border-gold"></div>
                <div class="absolute bottom-20 left-10 h-48 w-48 rounded-full border border-gold"></div>
            </div>

            <div
                class="anim-4 relative w-full max-w-[500px] rounded-2xl border border-gold/15 bg-dark-grey p-7 shadow-card sm:p-8 lg:p-10">

                <!-- Cabecera tarjeta -->
                <div class="mb-7 border-b border-border-sub pb-5">
                    <h2 class="font-display text-2xl font-medium italic text-text-main">Solicitar Acceso</h2>
                    <p class="mt-1.5 text-xs text-text-muted font-light">Completa tus datos Â· Se te asignarÃ¡ un gestor
                        en tu zona</p>
                </div>

                <!-- â”€â”€ [SEC-05e] Mensaje de Ã‰XITO (oculto por defecto) â”€â”€ -->
                <div id="success-message" class="hidden mb-6 rounded-xl border border-gold/30 bg-gold-dim p-5">
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-gold"
                            style="font-size:22px;font-variation-settings:'FILL' 1,'wght' 400">check_circle</span>
                        <div>
                            <h3 class="font-display text-lg italic text-gold">Â¡Solicitud recibida!</h3>
                            <p class="mt-1 text-xs text-text-muted leading-relaxed">
                                Tu Responsable de Club te contactarÃ¡ en <strong class="text-text-main/80">24â€“48
                                    horas</strong>.
                                Revisa tambiÃ©n tu bandeja de spam.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FORMULARIO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <form id="access-form" class="flex flex-col gap-5" novalidate>

                    <!-- â”€â”€ [SEC-05a] Selector de perfil â”€â”€ -->
                    <div class="flex flex-col gap-2">
                        <label class="text-[10px] uppercase tracking-[0.15em] font-medium text-gold">Perfil de
                            acceso</label>
                        <div class="grid grid-cols-2 rounded-lg bg-carbon p-1 border border-border-sub">
                            <label class="cursor-pointer">
                                <input id="profile-inversor" class="peer sr-only" name="profile_type" type="radio"
                                    value="inversor" checked />
                                <div
                                    class="flex items-center justify-center gap-1.5 rounded-md py-2.5 text-xs font-medium text-text-muted transition-all peer-checked:bg-gold peer-checked:text-carbon peer-checked:font-semibold peer-checked:shadow-sm">
                                    <span class="material-symbols-outlined"
                                        style="font-size:14px;font-variation-settings:'FILL' 0,'wght' 400">trending_up</span>
                                    Inversor
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input id="profile-promotor" class="peer sr-only" name="profile_type" type="radio"
                                    value="promotor" />
                                <div
                                    class="flex items-center justify-center gap-1.5 rounded-md py-2.5 text-xs font-medium text-text-muted transition-all peer-checked:bg-gold peer-checked:text-carbon peer-checked:font-semibold peer-checked:shadow-sm">
                                    <span class="material-symbols-outlined"
                                        style="font-size:14px;font-variation-settings:'FILL' 0,'wght' 400">storefront</span>
                                    Promotor/Gestor
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- â”€â”€ [SEC-05b] Campos personales â”€â”€ -->
                    <div class="grid gap-4">

                        <!-- Nombre completo -->
                        <div>
                            <label class="mb-1.5 block text-[10px] uppercase tracking-[0.12em] text-text-muted"
                                for="fullname">
                                Nombre completo <span class="text-gold">*</span>
                            </label>
                            <div class="relative group">
                                <span
                                    class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-text-dim group-focus-within:text-gold transition-colors material-symbols-outlined"
                                    style="font-size:16px;font-variation-settings:'FILL' 0,'wght' 300">person</span>
                                <input required id="fullname" name="fullname" type="text" placeholder="Ej. JoÃ£o Silva"
                                    class="w-full rounded-lg border border-border-sub bg-input-bg py-3 pl-9 pr-4 text-sm text-text-main placeholder-text-dim focus:border-gold focus:outline-none transition-all" />
                            </div>
                            <p class="hidden mt-1 text-[10px] text-red-400" id="err-fullname">Campo obligatorio</p>
                        </div>

                        <!-- Correo electrÃ³nico -->
                        <div>
                            <label class="mb-1.5 block text-[10px] uppercase tracking-[0.12em] text-text-muted"
                                for="email">
                                Correo electrÃ³nico <span class="text-gold">*</span>
                            </label>
                            <div class="relative group">
                                <span
                                    class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-text-dim group-focus-within:text-gold transition-colors material-symbols-outlined"
                                    style="font-size:16px;font-variation-settings:'FILL' 0,'wght' 300">mail</span>
                                <input required id="email" name="email" type="email" placeholder="nombre@empresa.com"
                                    class="w-full rounded-lg border border-border-sub bg-input-bg py-3 pl-9 pr-4 text-sm text-text-main placeholder-text-dim focus:border-gold focus:outline-none transition-all" />
                            </div>
                            <p class="hidden mt-1 text-[10px] text-red-400" id="err-email">Email invÃ¡lido</p>
                        </div>

                        <!-- TelÃ©fono -->
                        <div>
                            <label class="mb-1.5 block text-[10px] uppercase tracking-[0.12em] text-text-muted"
                                for="phone">
                                TelÃ©fono de contacto <span class="text-gold">*</span>
                            </label>
                            <div class="flex gap-2">
                                <!-- Prefijo -->
                                <select id="phone_prefix" name="phone_prefix"
                                    class="w-[108px] flex-shrink-0 rounded-lg border border-border-sub bg-input-bg py-3 pl-3 pr-2 text-xs text-text-main focus:border-gold focus:outline-none">
                                    <option value="+351">ğŸ‡µğŸ‡¹ +351</option>
                                    <option value="+34">ğŸ‡ªğŸ‡¸ +34</option>
                                    <option value="+55">ğŸ‡§ğŸ‡· +55</option>
                                    <option value="+52">ğŸ‡²ğŸ‡½ +52</option>
                                    <option value="+54">ğŸ‡¦ğŸ‡· +54</option>
                                    <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
                                    <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
                                    <option value="+33">ğŸ‡«ğŸ‡· +33</option>
                                    <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
                                    <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
                                </select>
                                <!-- NÃºmero -->
                                <input required id="phone" name="phone" type="tel" placeholder="000 000 000"
                                    class="flex-1 rounded-lg border border-border-sub bg-input-bg py-3 px-4 text-sm text-text-main placeholder-text-dim focus:border-gold focus:outline-none transition-all" />
                            </div>
                            <p class="hidden mt-1 text-[10px] text-red-400" id="err-phone">Campo obligatorio</p>
                        </div>

                        <!-- PaÃ­s de residencia -->
                        <div>
                            <label class="mb-1.5 block text-[10px] uppercase tracking-[0.12em] text-text-muted"
                                for="country">
                                PaÃ­s de residencia <span class="text-gold">*</span>
                            </label>
                            <select required id="country" name="country"
                                class="w-full rounded-lg border border-border-sub bg-input-bg py-3 px-4 text-sm text-text-main focus:border-gold focus:outline-none">
                                <option value="">Selecciona tu paÃ­sâ€¦</option>
                                <option value="PT">Portugal</option>
                                <option value="ES">EspaÃ±a</option>
                                <option value="BR">Brasil</option>
                                <option value="MX">MÃ©xico</option>
                                <option value="AR">Argentina</option>
                                <option value="US">Estados Unidos</option>
                                <option value="GB">Reino Unido</option>
                                <option value="FR">Francia</option>
                                <option value="DE">Alemania</option>
                                <option value="IT">Italia</option>
                                <option value="OTHER">Otro paÃ­s</option>
                            </select>
                            <!-- Nota de asignaciÃ³n territorial -->
                            <p class="mt-1.5 text-[10px] text-gold/50 italic">
                                <span class="material-symbols-outlined align-middle"
                                    style="font-size:11px">location_on</span>
                                Este dato determina tu Responsable de Club asignado â€” independiente de tu
                                Padrino/Referido
                            </p>
                            <p class="hidden mt-1 text-[10px] text-red-400" id="err-country">Selecciona un paÃ­s</p>
                        </div>
                    </div>
                    <!-- /[SEC-05b] -->

                    <!-- â”€â”€ [SEC-05c] Prescriptor / GenealogÃ­a â”€â”€ -->
                    <!--
          NOTA DE ARQUITECTURA:
          Â· El Prescriptor (padrino) es quien invita al lead â€” selecciÃ³n por nombre, NO por cÃ³digo.
          Â· Lista controlada: solo Prescriptores autorizados por CPII aparecen aquÃ­.
          Â· Para aÃ±adir/quitar prescriptores â†’ intervenciÃ³n /laparoscopia en este bloque [SEC-05c]
            y actualizaciÃ³n del array PRESCRIPTORES_AUTORIZADOS en [SEC-08].
          Â· Esta entidad es INDEPENDIENTE del Responsable de Club [SEC-07].
        -->
                    <div class="relative py-2">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-border-sub"></div>
                        </div>
                        <div class="relative flex justify-center">
                            <span
                                class="bg-dark-grey px-3 text-[9px] uppercase tracking-[0.2em] text-gold/50">Prescriptor</span>
                        </div>
                    </div>

                    <div>
                        <label
                            class="mb-1.5 flex items-center justify-between text-[10px] uppercase tracking-[0.12em] text-text-muted"
                            for="referral">
                            <span>Â¿QuiÃ©n te invitÃ³?</span>
                            <span id="ref-status" class="font-normal text-text-dim">Opcional</span>
                        </label>
                        <div class="relative group">
                            <span
                                class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-text-dim group-focus-within:text-gold transition-colors material-symbols-outlined"
                                style="font-size:16px;font-variation-settings:'FILL' 0,'wght' 300">person_search</span>
                            <select id="referral" name="referral"
                                class="w-full appearance-none rounded-lg border border-gold/20 bg-gold/[0.04] py-3 pl-9 pr-8 text-sm text-text-main focus:border-gold focus:bg-input-bg focus:outline-none transition-all">
                                <option value="">â€” Selecciona tu Prescriptor â€”</option>
                                <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                   â•‘  PRESCRIPTORES AUTORIZADOS â€” actualiza aquÃ­ y en [SEC-08] â•‘
                   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                <option value="david_almeida">David Almeida</option>
                                <option value="carlos_balboa">Carlos Balboa</option>
                            </select>
                            <!-- Chevron decorativo -->
                            <span
                                class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-text-dim material-symbols-outlined"
                                style="font-size:16px;font-variation-settings:'FILL' 0,'wght' 300">expand_more</span>
                        </div>
                        <p class="mt-1.5 text-[10px] text-text-dim">
                            Solo aparecen Prescriptores autorizados por CPII.
                            El Prescriptor <strong class="text-text-muted/80">no</strong> es tu Responsable de Club.
                        </p>
                    </div>
                    <!-- /[SEC-05c] -->

                    <!-- â”€â”€ [SEC-05d] Checkbox RGPD â”€â”€ -->
                    <div class="flex items-start gap-3 rounded-lg border border-border-sub bg-carbon/50 p-3.5">
                        <div class="flex h-5 items-center pt-0.5">
                            <input required id="terms" name="terms" type="checkbox"
                                class="h-4 w-4 cursor-pointer rounded border border-gold/30 bg-input-bg text-gold focus:ring-gold focus:ring-1 focus:ring-offset-0" />
                        </div>
                        <label class="text-[11px] leading-relaxed text-text-muted font-light cursor-pointer"
                            for="terms">
                            Acepto la
                            <a class="text-text-main/70 hover:text-gold underline underline-offset-2 decoration-white/20 transition-colors"
                                href="privacy.html">PolÃ­tica de Privacidad</a>
                            y los
                            <a class="text-text-main/70 hover:text-gold underline underline-offset-2 decoration-white/20 transition-colors"
                                href="terms.html">TÃ©rminos de Servicio</a>.
                            Entiendo que mis datos serÃ¡n tratados conforme al
                            <strong class="text-text-main/80">RGPD</strong>
                            y que mi solicitud estÃ¡ sujeta a aprobaciÃ³n.
                        </label>
                    </div>
                    <p class="hidden -mt-3 text-[10px] text-red-400" id="err-terms">Debes aceptar los tÃ©rminos para
                        continuar</p>
                    <!-- /[SEC-05d] -->

                    <!-- â”€â”€ [SEC-05e] BotÃ³n de envÃ­o â”€â”€ -->
                    <button id="submit-btn" type="submit"
                        class="group mt-1 flex w-full items-center justify-center gap-2 rounded-lg bg-gold py-4 text-xs font-semibold uppercase tracking-[0.15em] text-carbon transition-all hover:bg-gold-light hover:shadow-gold active:scale-[0.98] disabled:opacity-60 disabled:cursor-not-allowed">
                        <span class="btn-text flex items-center gap-2">
                            Validar solicitud
                            <span class="material-symbols-outlined transition-transform group-hover:translate-x-1"
                                style="font-size:15px;font-variation-settings:'FILL' 0,'wght' 400">arrow_forward</span>
                        </span>
                        <span class="btn-loader">
                            <span class="spinner"></span>
                            Enviandoâ€¦
                        </span>
                    </button>
                    <!-- /[SEC-05e] -->

                </form>
                <!-- /FORMULARIO -->

            </div>
            <!-- /tarjeta -->
        </div>
        <!-- /[SEC-05] panel derecho -->

    </main>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-06] FOOTER â•â• -->
    <footer class="relative z-10 border-t border-border-sub bg-carbon px-6 py-6 text-center">
        <p class="text-[9px] uppercase tracking-[0.25em] text-white/15">Confidencial â€” Solo para miembros autorizados Â·
            CPII Â© 2026</p>
        <div class="mt-3 flex justify-center gap-6">
            <a class="text-[11px] text-text-dim hover:text-gold transition-colors" href="privacy.html">Privacidad</a>
            <a class="text-[11px] text-text-dim hover:text-gold transition-colors" href="terms.html">TÃ©rminos</a>
            <a class="text-[11px] text-text-dim hover:text-gold transition-colors" href="index.html">Ayuda</a>
        </div>
    </footer>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-07] TABLA DE ASIGNACIÃ“N â•â• -->
    <!--
  TABLA FIJA: club_manager_map
  Â· Clave    = cÃ³digo ISO del paÃ­s (campo "country" del formulario)
  Â· Valor    = UID del Responsable de Club en Firestore (users/{uid})
  Â· DEFAULT  = Responsable que absorbe leads huÃ©rfanos o de paÃ­ses sin asignar
  Â· NOTA: Leads huÃ©rfanos (sin padrino, baja o expulsiÃ³n del progenitor)
          se asignan automÃ¡ticamente al club_manager del paÃ­s del lead.
  Â· IMPORTANTE: Esta tabla es INDEPENDIENTE de la genealogÃ­a (padrino).
                Actualiza los UIDs reales antes de desplegar en producciÃ³n.
-->
    <script>
        const CLUB_MANAGER_MAP = {
            PT: "UID_GESTOR_PORTUGAL",      // Responsable Club Portugal
            ES: "UID_GESTOR_ESPANA",        // Responsable Club EspaÃ±a
            BR: "UID_GESTOR_BRASIL",        // Responsable Club Brasil
            MX: "UID_GESTOR_MEXICO",        // Responsable Club MÃ©xico
            AR: "UID_GESTOR_ARGENTINA",     // Responsable Club Argentina
            US: "UID_GESTOR_DEFAULT",       // Pool internacional
            GB: "UID_GESTOR_DEFAULT",
            FR: "UID_GESTOR_DEFAULT",
            DE: "UID_GESTOR_DEFAULT",
            IT: "UID_GESTOR_DEFAULT",
            OTHER: "UID_GESTOR_DEFAULT",       // Fallback para cualquier otro paÃ­s
            _DEFAULT: "UID_GESTOR_DEFAULT",     // Absorbe huÃ©rfanos
        };

        /**
         * Devuelve el UID del Responsable de Club para un paÃ­s dado.
         * Si el paÃ­s no tiene gestor asignado, retorna el DEFAULT.
         * @param {string} countryCode - CÃ³digo ISO del paÃ­s (ej: "PT")
         * @returns {string} UID del gestor en Firestore
         */
        function getClubManager(countryCode) {
            return CLUB_MANAGER_MAP[countryCode] || CLUB_MANAGER_MAP._DEFAULT;
        }
    </script>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-08] CAPTURA DE PRESCRIPTOR â•â• -->
    <!--
  PRESCRIPTORES AUTORIZADOS â€” array de referencia sincronizado con [SEC-05c].
  Para aÃ±adir un prescriptor: aÃ±ade la option en [SEC-05c] Y su value aquÃ­.
  El value del <select> viaja a Firestore como genealogy.padrino.
-->
    <script>
        // Lista de values autorizados (debe coincidir con las options del select [SEC-05c])
        const PRESCRIPTORES_AUTORIZADOS = [
            "david_almeida",
            "carlos_balboa",
        ];

        (function initPrescriptor() {
            const urlParams = new URLSearchParams(window.location.search);
            const tipoParam = urlParams.get("tipo");
            const refParam = urlParams.get("ref") || sessionStorage.getItem("cpii_ref");
            const select = document.getElementById("referral");
            const refStatus = document.getElementById("ref-status");

            // Pre-selecciÃ³n desde URL ?ref=david_almeida (para links de invitaciÃ³n directa)
            if (refParam) {
                const refNorm = refParam.toLowerCase().replace(/\s+/g, "_");
                if (PRESCRIPTORES_AUTORIZADOS.includes(refNorm)) {
                    select.value = refNorm;
                    refStatus.textContent = "âœ“ Prescriptor detectado";
                    refStatus.className = "font-medium text-emerald-400";
                }
                // Si el valor de la URL no estÃ¡ en la lista autorizada, se ignora silenciosamente
            }

            // Pre-selecciÃ³n de perfil por URL (?tipo=inversor | promotor | gestor)
            if (tipoParam) {
                const tipoNorm = tipoParam.toLowerCase();
                if (tipoNorm === "inversor") {
                    document.getElementById("profile-inversor").checked = true;
                } else if (tipoNorm === "promotor" || tipoNorm === "gestor") {
                    document.getElementById("profile-promotor").checked = true;
                }
            }
        })();
    </script>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SEC-09] FIRESTORE â€” INIT + ENVÃO DE LEAD â•â• -->
    <!--
  INSTRUCCIONES DE CONFIGURACIÃ“N:
  1. Ve a Firebase Console â†’ DescripciÃ³n general â†’ Agregar app web
  2. Copia el objeto firebaseConfig y sustituye los valores placeholder abajo
  3. El modo de prueba de Firestore caduca en 30 dÃ­as â†’ configura reglas de seguridad antes
  4. ColecciÃ³n de leads: "leads" (cÃ¡mbiala en COLLECTION_NAME si usas otra)
-->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

        // â”€â”€ ğŸ”‘ SUSTITUYE ESTOS VALORES CON TU firebaseConfig REAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_PROYECTO.firebaseapp.com",
            projectId: "TU_PROJECT_ID",
            storageBucket: "TU_PROYECTO.appspot.com",
            messagingSenderId: "TU_SENDER_ID",
            appId: "TU_APP_ID",
        };
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

        const COLLECTION_NAME = "leads"; // â† cambia si tu colecciÃ³n se llama distinto

        let db;
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            console.log("[CPII] Firebase + Firestore conectados âœ“");
        } catch (e) {
            console.warn("[CPII] Firebase no inicializado â€” revisa firebaseConfig:", e.message);
        }

        // â”€â”€ HELPERS DE VALIDACIÃ“N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function showError(id, show) {
            document.getElementById("err-" + id).classList.toggle("hidden", !show);
        }

        function validateForm() {
            let valid = true;
            const fullname = document.getElementById("fullname").value.trim();
            const email = document.getElementById("email").value.trim();
            const phone = document.getElementById("phone").value.trim();
            const country = document.getElementById("country").value;
            const terms = document.getElementById("terms").checked;
            const emailRx = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            showError("fullname", !fullname); if (!fullname) valid = false;
            showError("email", !emailRx.test(email)); if (!emailRx.test(email)) valid = false;
            showError("phone", !phone); if (!phone) valid = false;
            showError("country", !country); if (!country) valid = false;
            showError("terms", !terms); if (!terms) valid = false;

            return valid;
        }

        // â”€â”€ HANDLER DE ENVÃO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.getElementById("access-form").addEventListener("submit", async function (e) {
            e.preventDefault();

            if (!validateForm()) return;

            const btn = document.getElementById("submit-btn");
            btn.classList.add("btn-loading");
            btn.disabled = true;

            const country = document.getElementById("country").value;
            const phonePrefix = document.getElementById("phone_prefix").value;
            const phoneFull = phonePrefix + document.getElementById("phone").value.trim();

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ESQUEMA FIRESTORE â€” colecciÃ³n: "leads"
            // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            // FASE 1 (este formulario):   campos poblados con valor real
            // FASE 2 (email / reuniÃ³n):   campos declarados como null â†’ se actualizan
            //                             vÃ­a Cloud Function o panel de administraciÃ³n
            //
            // ENTIDADES INDEPENDIENTES (nunca se cruzan):
            //   location.club_manager  â†’ asignaciÃ³n territorial, tabla fija [SEC-07]
            //   genealogy.padrino      â†’ red multinivel para Revenue Share
            //   Leads huÃ©rfanos (padrino = "HUERFANO") â†’ cloud function los asigna
            //   al club_manager de su paÃ­s cuando el progenitor se da de baja o es
            //   expulsado.
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // â”€â”€ Captura de valores del formulario â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            const padrino = document.getElementById("referral").value;

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ESQUEMA FIRESTORE â€” colecciÃ³n: "leads" â€” alineado con interfaz Usuario (Verdent)
            // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            // CICLO DE VIDA:
            //   Este documento es un estado de TRANSICIÃ“N. Cuando el Lead se apruebe,
            //   una Cloud Function lo promoverÃ¡ a la colecciÃ³n "usuarios", mapeando:
            //   metadata.club_manager â†’ seccionCertificada.gestorId
            //
            // FASE 2 (fuera de este formulario):
            //   investment_profile (POF, presupuesto, tipo propiedad) se completa
            //   vÃ­a email/reuniÃ³n y se actualiza desde el panel de administraciÃ³n.
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            const leadData = {

                // â”€â”€ Tipo de perfil (raÃ­z â€” interfaz Usuario) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                tipo: document.querySelector("input[name='profile_type']:checked").value,
                // "inversor" | "promotor"

                // â”€â”€ Perfil del lead (alineado con Usuario.perfil) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                perfil: {
                    nombre: document.getElementById("fullname").value.trim(),
                    email: document.getElementById("email").value.trim().toLowerCase(),
                    telefono: phoneFull,
                    pais: country,
                    idioma: "pt",
                    referidoPor: padrino || null,
                    // null = lead huÃ©rfano (sin prescriptor)
                    // La Cloud Function de promociÃ³n calcularÃ¡ nivel y revenue_share
                },

                // â”€â”€ Metadatos operativos â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                metadata: {
                    // GestiÃ³n y flujo
                    club_manager: window.getClubManager ? window.getClubManager(country) : "UID_GESTOR_DEFAULT",
                    // â†‘ Al promover a Usuario â†’ Cloud Function inyecta en seccionCertificada.gestorId
                    status: "pending_review",       // pending_review | approved | rejected
                    funnel_stage: "lead_captured",  // PosiciÃ³n en el funnel
                    source: "access-form",          // Origen del lead
                    // Legal â€” RGPD (no negociable)
                    rgpd_consent: true,             // Checkbox obligatorio ya validado
                    // Timestamps
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString(),
                },

            };

            console.log("â”€â”€ INICIO PROCESO DE ALTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
            console.log("1. Lead:", leadData.perfil.email);
            console.log("2. Tipo:", leadData.tipo);
            console.log("3. PaÃ­s / Club Manager:", leadData.perfil.pais, "â†’", leadData.metadata.club_manager);
            console.log("4. Referido por:", leadData.perfil.referidoPor ?? "HUÃ‰RFANO");
            console.log("5. Estado inicial:", leadData.metadata.status);
            console.log("6. Fase 2 pendiente:", "investment_profile (POF, presupuesto, tipo propiedad)");
            console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

            try {
                if (db) {
                    const docRef = await addDoc(collection(db, COLLECTION_NAME), leadData);
                    console.log("[CPII] Lead guardado en Firestore. ID:", docRef.id);
                } else {
                    console.warn("[CPII] Firestore no disponible â€” lead solo en consola.");
                }

                // Ã‰xito: ocultar formulario y mostrar mensaje
                this.classList.add("hidden");
                const successEl = document.getElementById("success-message");
                successEl.classList.remove("hidden");
                successEl.scrollIntoView({ behavior: "smooth", block: "center" });

            } catch (error) {
                console.error("[CPII] Error al guardar en Firestore:", error);
                btn.classList.remove("btn-loading");
                btn.disabled = false;
                alert("Hubo un error al enviar tu solicitud. Por favor, intÃ©ntalo de nuevo.");
            }
        });
    </script>

</body>

</html>